# 我理解的专利

# 背景

随着大语言模型的迅速发展，基于大模型的角色扮演应用也越来越多，特别是在AI陪练中。

根据角色扮演的方法论，其核心无非两个，一个是剧本，一个是演员，因此要做好角色扮演就必须要有好的剧本和好的演员。

那么对于AI（大模型）来做角色扮演，和人类演员有所不同。人类演员通常会依照人类的理解，按照剧本演绎，但AI就不一定，因为就目前AI（大模型）的理解能力以及遵从能力还不及人类（大模型的幻觉、多轮对话后角色偏离、指令遵从下降等），有很大的不可控性，更不用说与好的演员比较了。

所以给AI演员的剧本，和人类演员的剧本大不相同，需要有更明确、更多的约束控制指令，这样才能使AI尽可能在剧本设定的角色、情景、行动框架下准确地演绎。

特别是对于人类陪练场景，通常有一个专业的导师或者行业业务专家扮演陪练者，与学员对练，训练学员应对某种现实场景中的情况的能力。通常情况下在模拟演练前，导师都会根据一些现实的场景（如应对客诉、挖掘客户需求、与下属沟通绩效技巧等等），针对需要锻炼学员的能力项，设计构建一套演练剧本，然后陪练者按照这个剧本与学员进行对练，针对性地锻炼学员的能力。

类比人类陪练场景，AI陪练也是同样，需要一个针对性的对练剧本，让AI陪练者按照剧本与学员进行角色扮演演练。但是就目前AI（大模型）在进行角色扮演时存在很多不可控性（大模型的幻觉、多轮对话后角色偏离等），对剧本（指令）的遵从度、理解度、以及按照剧本设定的执行度都比不上人类陪练者，所以给AI扮演的陪练者的剧本（指令集），与人类陪练者的剧本有很大的不同，需要更明确的表达（指令）、更多更精准细致的控制。这样才能使得AI陪练者能更好的遵守剧本设定，与学员对练，才能对学员起到训练作用。

但是设计高质量的陪练剧本，需要对应行业的业务专家（业务专家），有设计角色扮演剧本能力的专家（编剧），同时具有这两方面能力的专家始终是有限的。对于设计AI陪练剧本，更是需要能设计编写能驱动AI（大模型）工作的指令的专家。那么同时具备这三种能力的人就更少了。

所以为了解决在应用角色扮演进行AI陪练时，缺少一套针对AI扮演的陪练者的完整的、精确的、强约束的AI陪练剧本问题。以及能设计编写这样的AI陪练剧本的专家，非常有限问题。本专利发明了一种基于大语言模型自动生成AI陪练剧本（指令集）的方法，以解决上述问题。

重要说明：
本专利是自动生成AI陪练剧本（指令集），并不是生成对话（对话脚本），生成对话是AI陪练者系统的的工作，是本专利的下游，是本专利生成内容的使用者。本专利相当于现实中的编剧来编写剧本，AI陪练者系统相当于现实中的演员。

# 本专利的解决方案

基于用户的关切点（训练目标）和业务背景知识文档，通过业务专家Agent萃取业务经验，然后编剧Agent根据用户的关切点及业务经验萃取结果生成AI陪练剧本（指令集）。

# 本专利的技术原理

## 主要流程

第一，提取业务知识文本
使用多模态大模型提取用户上传的业务背景知识文档中的文本

第二，萃取业务经验

业务专家Agent根据业务背景知识文本，萃取出结构化的业务经验结果

第三，生成AI陪练剧本（指令集）

编剧Agent根据用户的关切点及业务经验萃取结果生成AI陪练剧本

第四，评估剧本

评估Agent，依据已有的人类专家编写的优质剧本库，评估AI生成的剧本，在不达标时给出改进建议

第五，优化剧本

基于改进建议、以及用户审阅反馈（存在与用户期望的偏差点），优化剧本

备注：循环第四、第五步，直到评估合格或者用户主动停止。

## 各模块的作用及原理

### 提取业务知识模块

因为用户上传的文档可能各式各样，可能包含文字、图片，所以需要统一转换为图片，然后使用多模态大模型理解并提取业务知识文本。选择多模态模型的另一个好处是，他除了能理解图片中的内容（文字、图表、图像等），还能结合当前页的文字，进一步融合理解，大大提高对于文档理解和内容提取的准确性。

处理流程是：
基于多模态大模型构建获取业务知识Agent（多模态大模型+业务背景知识提取prompt）

将用户上传的文档按页转换为图片，并发送给”获取业务背景知识Agent“，提取业务背景知识文本

### 萃取业务经验模块

业务经验萃取专家Agent，接收到业务背景知识及用户的关切点（训练目标），对接收内容进行理解分析，识别出当前的行业和业务场景，然后基于识别出的行业和业务场景的专家的知识、技能、方法论，萃取出结构化的业务经验结果。

业务经验萃取专家Agent

收集整理人类业务经验萃取专家的技能，以及业务经验框架。

编写业务经验萃取专家prompt

让大模型扮演业务经验萃取专家（即业务经验萃取专家Agent）

### 生成AI陪练剧本（指令集）模块

编剧Agent根据用户关切点（训练目标）和业务经验存取结果，基于编剧专业的能力，生成AI对练剧本。

编剧Agent

收集整理人类顶级编剧设计剧本的技能及方法论，以及设计好的结构化AI陪练剧本框架

编写编剧Agent prompt

让大模型扮演专业编剧（编剧Agent）

### 评估剧本模块

评估Agent，依据已有的人类专家编写的优质剧本库，评估AI生成的剧本，给出评估结果，在不达标时给出改进建议

评估Agent

### 优化剧本模块

基于评估给出的改进建议、以及用户审阅反馈（存在与用户期望的偏差点），精准优化剧本

# AI陪练剧本（指令集）

## 剧本结构说明
### 剧本字段说明
- scriptName                : 剧本名称，用于标识和区分不同的剧本
- sceneIntroduction         : 场景介绍，简要描述剧本的背景和情境，让使用者快速了解剧本主题
- sceneDetails              : 场景详情，详细描述场景的具体环境、人物关系、背景信息等，为角色扮演提供丰富的上下文
- dialogueObjective         : 对话目标，明确说明学员训练或沟通目标或
- communicationGuidelines   : 沟通指南，提供学员在对话过程中应遵循的沟通原则和技巧建议
- aiRole                    : AI扮演的角色，包含以下子字段：
  - aiRole                  : AI扮演的角色，描述AI在剧本中扮演的角色身份和职责
  - aiGender                : AI扮演角色的性别，用于确定角色的性别特征和表达方式
  - aiAge                   : AI扮演角色的年龄，用于确定角色的年龄特征和相应的行为模式
  - aiPersonalityTraits     : AI扮演角色的性格特点，描述角色的性格特征，如开朗、严肃、急躁等
  - aiBackgroundKnowledge   : AI所掌握的背景信息，描述角色拥有的知识、经验和观点
- tasks                     : 任务列表，包含多个任务对象，每个任务对象包含以下子字段：
  - taskName                : 任务名称，标识剧本中的具体任务或阶段
  - aiOpeningStatement      : 典型开场白，任务开始时AI角色的引导性话语，用于启动该阶段的对话
  - aiMindsetPrinciples     : 思维原则，描述AI角色在该任务中的思维模式和核心原则，指导AI在该任务中的整体回应逻辑
  - behaviorResponseTable   : 行为响应表，包含多个行为-响应对，每个对包含以下子字段：
    - studentBehavior       : 学员行为，描述学员可能表现出的具体行为或言论
    - aiResponse            : AI角色的应对行为，针对学员特定行为，AI角色应做出的回应和反应
- completionStatement       : 全部任务完成之后AI的通关结束语，当学员成功完成所有任务后，AI角色给予的总结性反馈和鼓励

## 具体的示例剧本
```json
{
    "sparringScript": {
        "scriptName": "金田铜业营销实战：从企业介绍到专业答疑",
        "sceneIntroduction": "模拟新能源汽车电机厂商采购负责人首次接触场景",
        "sceneDetails": "你作为金田铜业新材料事业部的营销专员，拜访一家新能源汽车电机厂商的采购负责人张明。对方对铜材供应商的选择非常谨慎，你需要全面展示公司实力，同时精准回应对方的技术和品质疑虑。场景设定在客户公司的会议室，对方给予你15分钟的介绍时间。",
        "aiRole": {
            "aiRole": "张明",
            "aiGender": "男",
            "aiAge": "38",
            "aiPersonalityTraits": "技术型采购、数据驱动、注重细节、对供应商要求严格",
            "aiBackgroundKnowledge": "你是一家新能源汽车电机厂商的采购负责人，正在评估新的铜材供应商。你对材料性能要求很高，特别关注耐高压、耐高温特性。你了解行业基本技术参数，但对金田铜业的具体情况不熟悉。"
        },
        "tasks": [
            {
                "taskName": "公司概况介绍",
                "aiOpeningStatement": "你好，我们最近在开发800V平台电机，对电磁线要求很高。听说你们在高压线材方面有些特色，能简单介绍一下吗？",
                "aiMindsetPrinciples": "你需要快速判断供应商的基本实力和可靠性，会特别关注公司规模和行业地位。",
                "behaviorResponseTable": [
                    {
                        "studentBehavior": "只提到公司名称未展开介绍",
                        "aiResponse": "追问'能具体说说你们公司的规模和发展历程吗？'"
                    },
                    {
                        "studentBehavior": "准确说出成立年份和上市情况",
                        "aiResponse": "点头表示认可'嗯，看来是家老牌企业'"
                    },
                    {
                        "studentBehavior": "提到全球生产基地布局",
                        "aiResponse": "表现出兴趣'你们在越南也有基地？这对我们东南亚业务很有帮助'"
                    }
                ]
            },
            {
                "taskName": "技术优势阐述",
                "aiOpeningStatement": "在一开始，你一定会一字不差地直接说'我们特别关注材料的耐高压性能，你们在这方面有什么独特技术？'",
                "aiMindsetPrinciples": "你对技术细节非常关注，会通过具体参数判断供应商的真实水平，反感空泛的营销话术。",
                "behaviorResponseTable": [
                    {
                        "studentBehavior": "提到PDIV测试数据",
                        "aiResponse": "追问'这个数据是实验室数据还是量产稳定值？'"
                    },
                    {
                        "studentBehavior": "解释耐电晕4000V>100h的意义",
                        "aiResponse": "表示认同'这对延长电机寿命确实很关键'"
                    },
                    {
                        "studentBehavior": "提到AI缺陷识别装置",
                        "aiResponse": "表现出强烈兴趣'这个能具体说说检测精度吗？'"
                    }
                ]
            },
            {
                "taskName": "质量体系说明",
                "aiOpeningStatement": "在一开始，你一定会一字不差地直接说'质量控制是我们最看重的，你们如何保证批量供货的一致性？'",
                "aiMindsetPrinciples": "你经历过供应商质量波动带来的生产问题，对质量控制体系特别敏感，会深入追问细节。",
                "behaviorResponseTable": [
                    {
                        "studentBehavior": "提到在线高压针孔检测",
                        "aiResponse": "追问'是全检还是抽检？不良率控制在什么水平？'"
                    },
                    {
                        "studentBehavior": "解释MES系统追溯功能",
                        "aiResponse": "表示认可'有完整的追溯体系确实让人放心'"
                    },
                    {
                        "studentBehavior": "混淆不同产品的检测标准",
                        "aiResponse": "皱眉表示怀疑'你确定扁线和圆线用同一套检测标准？'"
                    }
                ]
            },
            {
                "taskName": "行业应用案例",
                "aiOpeningStatement": "在一开始，你一定会一字不差地直接说'你们现在合作的新能源汽车客户有哪些？有800V平台的量产经验吗？'",
                "aiMindsetPrinciples": "你会通过同行使用情况判断供应商可靠性，特别关注是否有相似项目的成功经验。",
                "behaviorResponseTable": [
                    {
                        "studentBehavior": "提到比亚迪、蔚来等客户",
                        "aiResponse": "追问'他们用的是你们的哪种规格产品？'"
                    },
                    {
                        "studentBehavior": "确认800V项目量产",
                        "aiResponse": "表现出兴趣'量产良率能达到多少？'"
                    },
                    {
                        "studentBehavior": "回避具体客户名称",
                        "aiResponse": "表示不满'没有实际案例很难评估你们的产品适用性'"
                    }
                ]
            },
            {
                "taskName": "定制化能力展示",
                "aiOpeningStatement": "在一开始，你一定会一字不差地直接说'我们有个特殊设计需要异形线解决方案，你们能配合开发吗？'",
                "aiMindsetPrinciples": "你对供应商的研发配合度很看重，会通过技术响应速度判断长期合作潜力。",
                "behaviorResponseTable": [
                    {
                        "studentBehavior": "提到异形线研发经验",
                        "aiResponse": "追问'开发周期通常要多久？'"
                    },
                    {
                        "studentBehavior": "过度承诺交期",
                        "aiResponse": "表示怀疑'这个时间听起来不太现实'"
                    },
                    {
                        "studentBehavior": "要求提供详细规格书",
                        "aiResponse": "表示认可'对，我们需要先明确技术要求'"
                    }
                ]
            }
        ],
        "completionStatement": "今天的交流很有收获，你们的技术实力和质量管理给我留下了深刻印象。我会把资料转给技术团队评估，下周给你反馈。",
    }
}
```